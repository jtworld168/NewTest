<view class="category-page">
  <!-- Search Bar -->
  <view class="search-bar">
    <input class="search-input" placeholder="æœç´¢å•†å“" value="{{searchKeyword}}" bindinput="onSearchInput" bindconfirm="doSearch" />
    <view class="search-btn" bindtap="doSearch">æœç´¢</view>
  </view>

  <view class="content">
    <!-- Category Sidebar -->
    <scroll-view class="category-sidebar" scroll-y="true">
      <view class="sidebar-item {{selectedCategoryId === item.id ? 'active' : ''}}" wx:for="{{categories}}" wx:key="id" bindtap="selectCategory" data-id="{{item.id}}">
        <text>{{item.name}}</text>
      </view>
    </scroll-view>

    <!-- Product List -->
    <scroll-view class="product-list" scroll-y="true">
      <view wx:if="{{!loading && products.length > 0}}">
        <view class="product-item" wx:for="{{products}}" wx:key="id" bindtap="goToProductDetail" data-id="{{item.id}}">
          <image class="item-image" src="{{item._imageUrl || '/images/product-placeholder.png'}}" mode="aspectFill"></image>
          <view class="item-info">
            <text class="item-name">{{item.name}}</text>
            <text class="item-desc" wx:if="{{item.description}}">{{item.description}}</text>
            <view class="item-bottom">
              <view class="price-area">
                <text class="price">Â¥{{item._displayPrice}}</text>
                <text class="original-price" wx:if="{{item._isEmployee}}">Â¥{{item.price}}</text>
                <text class="employee-tag" wx:if="{{item._isEmployee}}">å†…è´­ä»·</text>
              </view>
              <text class="item-stock">åº“å­˜: {{item.stock}}</text>
            </view>
          </view>
        </view>
      </view>
      <view class="loading" wx:if="{{loading}}">
        <text>åŠ è½½ä¸­...</text>
      </view>
      <view class="empty-state" wx:if="{{!loading && products.length === 0}}">
        <text class="empty-icon">ğŸ“¦</text>
        <text class="empty-text">è¯¥åˆ†ç±»æš‚æ— å•†å“</text>
      </view>
    </scroll-view>
  </view>
</view>
