<view class="container">
  <!-- Tabs -->
  <view class="tabs">
    <view class="tab {{currentTab === item.key ? 'active' : ''}}" wx:for="{{tabs}}" wx:key="key" bindtap="switchTab" data-tab="{{item.key}}">
      <text>{{item.name}}</text>
    </view>
  </view>

  <!-- Order List -->
  <view class="order-list" wx:if="{{!loading}}">
    <block wx:for="{{orders}}" wx:key="id">
      <view class="order-card" wx:if="{{currentTab === 'all' || item.status === currentTab}}">
        <view class="order-header">
          <text class="order-id">è®¢å•å·: {{item.id}}</text>
          <text class="order-status" style="color: {{item.status === 'PENDING' ? '#ff9800' : item.status === 'PAID' ? '#07c160' : item.status === 'CANCELLED' ? '#ee0a24' : '#999'}}">
            {{item.status === 'PENDING' ? 'å¾…æ”¯ä»˜' : item.status === 'PAID' ? 'å·²æ”¯ä»˜' : item.status === 'COMPLETED' ? 'å·²å®Œæˆ' : 'å·²å–æ¶ˆ'}}
          </text>
        </view>

        <view class="order-body">
          <image class="order-product-image" src="{{productMap[item.productId].image ? getFileUrl(productMap[item.productId].image) : '/images/product-placeholder.png'}}" mode="aspectFill"></image>
          <view class="order-product-info">
            <text class="order-product-name">{{productMap[item.productId].name || 'å•†å“ #' + item.productId}}</text>
            <text class="order-quantity">x{{item.quantity}}</text>
            <text class="order-price">å•ä»·: Â¥{{item.priceAtPurchase}}</text>
          </view>
        </view>

        <view class="order-footer">
          <text class="order-time" wx:if="{{item.createTime}}">{{item.createTime}}</text>
          <view class="order-total">
            <text>åˆè®¡: </text>
            <text class="price">Â¥{{item.totalAmount}}</text>
          </view>
        </view>
      </view>
    </block>
  </view>

  <view class="loading" wx:if="{{loading}}">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <view class="empty-state" wx:if="{{!loading && orders.length === 0}}">
    <text class="empty-icon">ğŸ“‹</text>
    <text class="empty-text">æš‚æ— è®¢å•</text>
  </view>
</view>
